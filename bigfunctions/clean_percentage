type: function_sql
category: transform_string
author:
  name: "Credits: Thomas Ellyatt"
  url: https://www.linkedin.com/in/thomas-ellyatt-84a51b218/
  avatar_url: "https://avatars.githubusercontent.com/u/110492001?v=4"
description: |-
    When you need a percentage presented in a more user-friendly format, You can use this function 
    to handle a safe divide of the two numbers as well as your desired level of rounding.
arguments:
  - name: first_number
    type: float64
  - name: second_number
    type: float64
  - name: nb_decimals
    type: int64
output:
  name: url_parts
  type: string
examples:
  - description: ""
    arguments:
      - "first_number = 50, second_number = 120, nb_decimals = 2"
    output: 41.7%
    region: ALL
code: |
CREATE TEMP FUNCTION clean_percent(first_number FLOAT64, second_number FLOAT64, nb_decimals INT64)
  RETURNS STRING
  AS
  (
    ROUND
    (
      IEEE_DIVIDE(first_number,second_number) * 100, nb_decimals
    )
    || "%"
  );
